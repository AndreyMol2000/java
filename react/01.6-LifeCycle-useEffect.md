01.6-LifeCycle-useEffect.md
# –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ useEffect

## üîπ –ö—Ä–∞—Ç–∫–æ
–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ‚Äî —ç—Ç–æ **—ç—Ç–∞–ø—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞**: —Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ.  
–í —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∑–∞ —Ä–∞–±–æ—Ç—É —Å –ø–æ–±–æ—á–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ –æ—Ç–≤–µ—á–∞–µ—Ç **—Ö—É–∫ `useEffect`**.

---

## üîπ –ü–æ–¥—Ä–æ–±–Ω–æ

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –≤ –∫–ª–∞—Å—Å–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
1. **constructor(props)** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è.
2. **componentDidMount()** ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞, –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è API-–∑–∞–ø—Ä–æ—Å–æ–≤.
3. **componentDidUpdate(prevProps, prevState)** ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è props –∏–ª–∏ state.
4. **componentWillUnmount()** ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Ç–∞–π–º–µ—Ä–æ–≤ –∏–ª–∏ –ø–æ–¥–ø–∏—Å–æ–∫.

–ü—Ä–∏–º–µ—Ä:
```jsx
class Clock extends React.Component {
  constructor(props) {
    super(props);
    this.state = { time: new Date() };
  }

  componentDidMount() {
    this.timer = setInterval(() => this.tick(), 1000);
  }

  componentDidUpdate(prevProps, prevState) {
    console.log("–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞", prevState.time, this.state.time);
  }

  componentWillUnmount() {
    clearInterval(this.timer);
  }

  tick() {
    this.setState({ time: new Date() });
  }

  render() {
    return <h1>{this.state.time.toLocaleTimeString()}</h1>;
  }
}

useEffect –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

useEffect –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –º–µ—Ç–æ–¥–æ–≤ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞:

useEffect(() => {
  // –∫–æ–¥ —ç—Ñ—Ñ–µ–∫—Ç–∞
  return () => {
    // –æ—á–∏—Å—Ç–∫–∞ (componentWillUnmount)
  };
}, [–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏]);

–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
1. –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ (componentDidMount)
import { useEffect } from "react";

function App() {
  useEffect(() => {
    console.log("–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω");
  }, []); // –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ ‚Äî —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑

  return <h1>–ü—Ä–∏–≤–µ—Ç!</h1>;
}

2. –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ (componentDidUpdate)
import { useState, useEffect } from "react";

function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    console.log("–°—á—ë—Ç—á–∏–∫ –æ–±–Ω–æ–≤–∏–ª—Å—è:", count);
  }, [count]); // —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ count

  return <button onClick={() => setCount(count + 1)}>{count}</button>;
}

3. –û—á–∏—Å—Ç–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞ (componentWillUnmount)
import { useEffect, useState } from "react";

function Timer() {
  const [seconds, setSeconds] = useState(0);

  useEffect(() => {
    const interval = setInterval(() => setSeconds(s => s + 1), 1000);
    return () => clearInterval(interval); // –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
  }, []);

  return <h1>{seconds} —Å–µ–∫—É–Ω–¥</h1>;
}

üîπ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

–°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Clock, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—Ä–µ–º—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useEffect –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–∞–π–º–µ—Ä–∞ –∏ –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.

–°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Counter, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≤–æ–¥–∏—Ç —á–∏—Å–ª–æ –∏ –ª–æ–≥–∏—Ä—É–µ—Ç –µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å —á–µ—Ä–µ–∑ useEffect.

–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤, –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π state, –±–µ–∑ –º–∞—Å—Å–∏–≤–∞.

üîπ –°–æ–≤–µ—Ç—ã –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

–í—Å–µ–≥–¥–∞ –æ—á–∏—â–∞–π—Ç–µ –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.

–ù–µ –≤—ã–∑—ã–≤–∞–π—Ç–µ useEffect –≤–Ω—É—Ç—Ä–∏ —É—Å–ª–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏–ª–∏ —Ü–∏–∫–ª–æ–≤.

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–∞—Å—Å–∏–≤–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è, –∫–æ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç.

–î–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤–Ω—É—Ç—Ä–∏ useEffect –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ async-—Ñ—É–Ω–∫—Ü–∏–∏:

useEffect(() => {
  async function fetchData() {
    const res = await fetch("/api/data");
    const json = await res.json();
    console.log(json);
  }
  fetchData();
}, []);

üîπ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

useEffect –∑–∞–º–µ–Ω—è–µ—Ç –ø–æ—á—Ç–∏ –≤—Å–µ –º–µ—Ç–æ–¥—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∫–ª–∞—Å—Å–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ useEffect –≤ –æ–¥–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏.

–ü–æ—Å–ª–µ –æ—Å–≤–æ–µ–Ω–∏—è useEffect –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–±—ã—Ç–∏–π –∏ useRef –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DOM.